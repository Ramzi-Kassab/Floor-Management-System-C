{% extends "base.html" %}
{% load static %}

{% block title %}Home - Floor Management System{% endblock %}

{% block content %}
<!-- Welcome Header -->
<div class="dashboard-header text-center">
    <h1><i class="fas fa-industry"></i> Welcome to Floor Management System</h1>
    <p class="lead">Version C - Clean Build with Codespaces Integration</p>
</div>

<!-- System Status Cards -->
<div class="row">
    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header">
                <i class="fas fa-check-circle"></i> System Status
            </div>
            <div class="card-body">
                <div class="kpi-card position-relative">
                    <div class="kpi-label">Environment</div>
                    <div class="kpi-value h4 text-success">
                        {% if 'github.dev' in request.get_host %}
                        <i class="fas fa-cloud"></i> Codespaces
                        {% else %}
                        <i class="fas fa-laptop"></i> Local
                        {% endif %}
                    </div>
                    <div class="mt-3">
                        <small class="text-muted">
                            <i class="fas fa-server"></i> Django {{ django_version }}<br>
                            <i class="fas fa-database"></i> PostgreSQL Connected<br>
                            <i class="fas fa-user"></i>
                            {% if user.is_authenticated %}
                                Logged in as <strong>{{ user.username }}</strong>
                            {% else %}
                                Not logged in
                            {% endif %}
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header">
                <i class="fas fa-database"></i> Core Foundation
            </div>
            <div class="card-body">
                <div class="kpi-card position-relative">
                    <div class="kpi-label">Models Available</div>
                    <div class="kpi-value">12</div>
                    <div class="mt-3">
                        <ul class="list-unstyled small">
                            <li><i class="fas fa-check text-success"></i> CostCenter</li>
                            <li><i class="fas fa-check text-success"></i> Currency</li>
                            <li><i class="fas fa-check text-success"></i> Notification</li>
                            <li><i class="fas fa-check text-success"></i> ERPReference</li>
                            <li class="text-muted">+ 8 more...</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-header">
                <i class="fas fa-tasks"></i> Quick Actions
            </div>
            <div class="card-body">
                {% if user.is_authenticated %}
                <div class="d-grid gap-2">
                    <a href="{% url 'admin:index' %}" class="btn btn-primary">
                        <i class="fas fa-cog"></i> Admin Panel
                    </a>
                    <a href="{% url 'admin:core_foundation_costcenter_changelist' %}" class="btn btn-outline-primary">
                        <i class="fas fa-building"></i> Cost Centers
                    </a>
                    <a href="{% url 'admin:core_foundation_currency_changelist' %}" class="btn btn-outline-primary">
                        <i class="fas fa-dollar-sign"></i> Currencies
                    </a>
                    <a href="{% url 'admin:core_foundation_notification_changelist' %}" class="btn btn-outline-primary">
                        <i class="fas fa-bell"></i> Notifications
                    </a>
                </div>
                {% else %}
                <div class="text-center py-4">
                    <p class="text-muted">Please log in to access system features</p>
                    <a href="{% url 'admin:login' %}" class="btn btn-primary">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Migration Progress -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-chart-line"></i> Migration Progress
            </div>
            <div class="card-body">
                <h5>Phase 2: App Migration Status</h5>
                <div class="progress mb-3" style="height: 30px;">
                    <div class="progress-bar bg-success" role="progressbar" style="width: 8%;" aria-valuenow="8" aria-valuemin="0" aria-valuemax="100">
                        8% Complete
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-success"><i class="fas fa-check-circle"></i> Completed Apps</h6>
                        <ul>
                            <li><strong>core_foundation</strong> - 12 models (Foundation layer)</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-warning"><i class="fas fa-clock"></i> Pending Apps</h6>
                        <ul class="text-muted">
                            <li>core (Dashboard/Aggregator)</li>
                            <li>hr (Human Resources)</li>
                            <li>inventory (Inventory Management)</li>
                            <li>engineering (Engineering)</li>
                            <li>production (Production)</li>
                            <li>+ 9 more apps...</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Documentation Links -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <i class="fas fa-book"></i> Documentation & Resources
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <h6><i class="fas fa-cloud"></i> Codespaces</h6>
                        <ul class="list-unstyled small">
                            <li><a href="#">Codespaces Guide</a></li>
                            <li><a href="#">Setup Instructions</a></li>
                            <li><a href="#">Troubleshooting</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h6><i class="fas fa-code-branch"></i> Migration</h6>
                        <ul class="list-unstyled small">
                            <li><a href="#">Migration Plan</a></li>
                            <li><a href="#">Progress Tracking</a></li>
                            <li><a href="#">Architecture Decisions</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h6><i class="fas fa-cogs"></i> Development</h6>
                        <ul class="list-unstyled small">
                            <li><a href="#">Quick Start Guide</a></li>
                            <li><a href="#">API Documentation</a></li>
                            <li><a href="#">Testing Guide</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3">
                        <h6><i class="fas fa-question-circle"></i> Support</h6>
                        <ul class="list-unstyled small">
                            <li><a href="#">FAQ</a></li>
                            <li><a href="#">Issue Tracker</a></li>
                            <li><a href="#">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Getting Started -->
{% if not user.is_authenticated %}
<div class="row mt-4">
    <div class="col-12">
        <div class="alert alert-info">
            <h5 class="alert-heading"><i class="fas fa-info-circle"></i> Getting Started</h5>
            <p>This is a fresh installation of the Floor Management System. To get started:</p>
            <ol>
                <li>Login to the admin panel using the credentials you created</li>
                <li>Explore the Core Foundation models (CostCenter, Currency, etc.)</li>
                <li>Wait for additional apps to be migrated from the legacy system</li>
            </ol>
            <hr>
            <p class="mb-0">
                <a href="{% url 'admin:login' %}" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> Login Now
                </a>
            </p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}
