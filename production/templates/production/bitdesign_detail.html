{% extends 'production/base.html' %}
{% block title %}{{ design.design_code }}{% endblock %}
{% block content %}
<div class="row mb-4">
    <div class="col-md-6"><h1>Bit Design: {{ design.design_code }}</h1></div>
    <div class="col-md-6 text-end">
        <a href="{% url 'production:bitdesign-mat-levels' design.pk %}" class="btn btn-info">
            <i class="bi bi-layers"></i> MAT Levels
        </a>
        <a href="{% url 'production:bitdesign-edit' design.pk %}" class="btn btn-warning">Edit</a>
    </div>
</div>
<div class="card">
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h6 class="text-muted mb-3">Bit Category & Identification</h6>
                <p><strong>Design Code:</strong> {{ design.design_code }}</p>
                <p><strong>Level-1 Design MAT:</strong> {{ design.design_mat_number|default:"—" }}</p>
                <p><strong>Bit Category (Bit Cat):</strong> {{ design.get_bit_type_display }}</p>
                <p><strong>Size:</strong> {{ design.size_inch }}"</p>
                <p><strong>Active:</strong> {% if design.active %}<span class="badge bg-success">Yes</span>{% else %}<span class="badge bg-secondary">No</span>{% endif %}</p>
            </div>
            <div class="col-md-6">
                <h6 class="text-muted mb-3">Design Names & Codes</h6>
                <p><strong>Current SMI Name:</strong> {{ design.current_smi_name|default:"—" }}</p>
                <p><strong>HDBS Name:</strong> {{ design.hdbs_name|default:"—" }}</p>
                <p><strong>IADC Code:</strong> {{ design.iadc_code|default:"—" }}</p>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-6">
                <h6 class="text-muted mb-3">Fixed Cutter (PDC) Specifications</h6>
                <p><strong>Body Material:</strong> {{ design.get_body_material_display|default:"—" }}</p>
                <p><strong>Blade Count:</strong> {{ design.blade_count|default:"—" }}</p>
                <p><strong>Cutter Size Category:</strong> {{ design.cutter_size_category|default:"—" }}</p>
                <p><strong>Gauge Length (inch):</strong> {{ design.gauge_length_inch|default:"—" }}</p>
            </div>
            <div class="col-md-6">
                <h6 class="text-muted mb-3">Hydraulics</h6>
                <p><strong>Nozzle Count:</strong> {{ design.nozzle_count|default:"—" }}</p>
                <p><strong>Port Count:</strong> {{ design.port_count|default:"—" }}</p>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-6">
                <h6 class="text-muted mb-3">Connection & Gauge Geometry</h6>
                <p><strong>Connection Type:</strong> {{ design.get_connection_type_display|default:"—" }}</p>
                <p><strong>Shank Diameter:</strong> {{ design.shank_diameter_inch|default:"—" }}"</p>
                <p><strong>Gauge Relief:</strong> {{ design.gauge_relief_thou|default:"—" }} thou</p>
            </div>
            <div class="col-md-6">
                <h6 class="text-muted mb-3">Breaker Slot Dimensions</h6>
                <p><strong>Breaker Open Width:</strong> {{ design.breaker_slot_width_inch|default:"—" }}"</p>
                <p><strong>Breaker Thickness:</strong> {{ design.breaker_slot_height_inch|default:"—" }}"</p>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="col-md-12">
                <h6 class="text-muted mb-3">Description & Notes</h6>
                {% if design.description %}<p><strong>Description:</strong> <span class="text-muted">(Auto-generated)</span><br>{{ design.description }}</p>{% endif %}
                {% if design.remarks %}<p><strong>Remarks:</strong><br><span class="text-muted">{{ design.remarks|linebreaks }}</span></p>{% endif %}
            </div>
        </div>
    </div>
</div>
{% if revisions %}
<div class="card mt-3">
    <div class="card-header"><h5>Design Revisions</h5></div>
    <div class="card-body">
        <table class="table">
            <thead><tr><th>MAT Number</th><th>Level</th><th>Effective From</th><th>Active</th></tr></thead>
            <tbody>
                {% for rev in revisions %}
                <tr>
                    <td>{{ rev.mat_number }}</td>
                    <td>{{ rev.level }}</td>
                    <td>{{ rev.effective_from|date:"Y-m-d" }}</td>
                    <td>{% if rev.active %}<span class="badge bg-success">Yes</span>{% else %}<span class="badge bg-secondary">No</span>{% endif %}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endif %}
{% endblock %}
